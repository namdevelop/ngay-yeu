<?php
 goto uTX6i; uTX6i: include "\56\56\57\x6b\x65\171\56\160\x68\x70"; goto ij9AX; ij9AX: if (file_exists("\x2e\x2e\57\151\156\x73\x74\141\154\x6c\x2e\154\x6f\143\153") && strpos(file_get_contents("\x2e\x2e\57\151\156\x73\x74\141\x6c\x6c\56\154\x6f\x63\x6b"), "\x74\150\141\156\x68\144\x69\x65\165\x6c\x6f\x76\x65\75\164\162\165\145") !== false) { header("\114\157\143\141\164\x69\157\x6e\72\x20\56\56\57"); } goto OGQPv; UAvVT: $php_bb = phpversion(); goto pQeoc; aKZp7: ?>
<!doctypehtml><html class="thanhdieuinstaller"lang="vi-VN"><head><meta charset="utf-8"><title>Loveday - Install V1.0.0</title><meta content="width=device-width,initial-scale=1"name="viewport"><link href="https://i.imgur.com/Z9S96Sm.png"rel="icon"><link href="../assets/oneui/css/oneui.min-5.6.css"rel="stylesheet"id="css-main"><link href="https://cdn.bootcdn.net/ajax/libs/layer/3.1.1/theme/default/layer.css"rel="stylesheet"><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script></head><body><div class="main-content-boxed"id="page-container"><main id="main-container"><div class="bg-body-light hero-bubbles"><span class="hero-bubble hero-bubble-lg bg-primary"style="top:20%;left:10%"></span> <span class="hero-bubble bg-success"style="top:20%;left:80%"></span> <span class="hero-bubble bg-corporate hero-bubble-sm"style="top:40%;left:25%"></span> <span class="hero-bubble hero-bubble-lg bg-pulse"style="top:30%;left:90%"></span> <span class="hero-bubble bg-danger"style="top:40%;left:20%"></span> <span class="hero-bubble bg-warning"style="top:60%;left:25%"></span> <span class="hero-bubble bg-info"style="top:60%;left:80%"></span> <span class="hero-bubble hero-bubble-lg bg-flat"style="top:75%;left:70%"></span> <span class="hero-bubble hero-bubble-lg bg-earth"style="top:75%;left:10%"></span> <span class="hero-bubble bg-elegance"style="top:90%;left:90%"></span><div class="row g-0 justify-content-center position-relative"><div class="col-lg-7 hero-static"><div class="content content-full overflow-hidden"><div class="text-center py-5"><a class="fw-bold link-fx"href="javascript:void(0);"><i class="fa fa-gear fa-spin"></i> <span class="fs-4 text-body-color">NamPham </span><span class="fs-4">Installer</span></a><h1 class="mb-2 fw-bold h3 mt-5">Chào mừng đến với trình cài đặt</h1><h2 class="text-muted fs-base fw-medium mb-0"style="text-transform:uppercase"><?php  goto VMgv2; OGQPv: $web_mulu = dirname($_SERVER["\123\103\x52\x49\x50\124\137\106\111\x4c\x45\116\101\115\105"], 2); goto UAvVT; VMgv2: if ($a == 0) { ?>
Kiểm soát môi trường<?php  } elseif ($a == 1) { ?>
Cấu hình cơ sở dữ liệu<?php  } elseif ($a == 2) { ?>
Quá trình cài đặt hoàn tất<?php  } goto UkKEy; YqFav: if ($a == 0) { ?>
<div class="block block-fx-shadow block-rounded"><div class="block-content"><div class="table-responsive-sm"><table class="table table-bordered table-centered"><thead><tr class="text-nowrap"><th class="text-center">tham số</th><th class="text-center">Giá trị hiện tại</th><th class="text-center">Giá trị yêu cầu</th><th class="text-center">Tình trạng</th></tr></thead><tbody><tr class="text-nowrap"><td class="text-center">Tên miền hiện tại</td><td class="text-center"><?php  echo $web_url; ?>
</td><td class="text-center">*</td><td class="text-center"><span class="<?php  echo $web_url ? "\x74\145\170\164\x2d\163\165\143\143\145\163\x73" : "\x74\145\170\x74\55\x64\141\x6e\x67\145\162"; ?>
"><?php  echo $web_url ? "\102\xc3\xac\156\x68\40\x74\x68\306\260\341\xbb\235\156\147" : "\x42\xe1\xba\xa5\x74\x20\x74\150\xc6\260\xe1\xbb\235\156\x67"; ?>
</span></td></tr><tr class="text-nowrap"><td class="text-center">Phiên bản PHP</td><td class="text-center"><?php  echo $php_bb; ?>
</td><td class="text-center">>=7.2</td><td class="text-center"><span class="<?php  echo $php_bb >= 7.2 ? "\x74\145\170\x74\55\163\x75\x63\143\x65\163\163" : "\164\145\x78\x74\55\144\x61\x6e\x67\145\x72"; ?>
"><?php  echo $php_bb >= 7.3 ? "\x42\303\xac\156\x68\x20\164\x68\xc6\260\xe1\xbb\x9d\x6e\x67" : "\x42\xe1\xba\xa5\x74\x20\x74\150\306\xb0\341\xbb\235\156\x67"; ?>
</span></td></tr><tr class="text-nowrap"><td class="text-center">Giấy phép</td><td class="text-center"><?php  echo License ? "\103\150\341\273\x9d\x20\170\303\241\143\x20\155\151\156\150" : "\103\150\xc6\xb0\141\40\170\xc3\241\143\x20\xc4\x91\341\273\213\x6e\150"; ?>
</td><td class="text-center">Bắt buộc</td><td class="text-center"><span class="<?php  echo License ? "\x74\x65\x78\x74\55\144\141\x6e\147\145\x72" : "\x74\145\x78\164\55\144\141\x6e\x67\x65\162"; ?>
"><?php  echo License ? "\103\x68\341\273\x9d\40\153\303\255\143\x68\x20\150\x6f\341\272\xa1\164" : "\x42\xe1\xba\xa5\x74\x20\164\x68\xc6\xb0\341\xbb\x9d\156\x67"; ?>
</span></td></tr><tr class="text-nowrap"><td class="text-center">MYSQL</td><td class="text-center"><?php  echo $mysql_bb; ?>
</td><td class="text-center">Hỗ trợ</td><td class="text-center"><span class="<?php  echo $mysql_bb == "\x48\xe1\xbb\227\x20\x74\x72\xe1\273\xa3" ? "\x74\x65\x78\164\x2d\x73\165\143\143\x65\163\163" : "\x74\145\x78\x74\x2d\x64\141\x6e\x67\x65\162"; ?>
"><?php  echo $mysql_bb == "\110\341\xbb\x97\40\x74\162\341\xbb\243" ? "\102\303\xac\156\150\40\x74\x68\306\260\xe1\xbb\235\156\x67" : "\x42\xe1\xba\245\x74\x20\164\150\xc6\xb0\341\273\x9d\156\147"; ?>
</span></td></tr></tbody></table></div><div class="block-content"><div class="mb-4 row"><div class="col-lg-6 offset-lg-5"><a class="mb-2 btn btn-alt-primary"href="./?a=1"><i class="fa fa-arrow-right me-1 opacity-75"></i> Bước tiếp theo</a></div></div></div></div><?php  } elseif ($a == 1) { ?>
<form action="./?a=1"id="addimg"method="post"name="addimg"><div class="block block-fx-shadow block-rounded"><div class="block-content"><h2 class="content-heading pt-3">Cài đặt cơ sở dữ liệu</h2><div class="row items-push"><div class="col-lg-4"><p class="text-muted">Hãy đảm bảo rằng biểu mẫu cơ sở dữ liệu được điền chính xác, nếu không quá trình cài đặt sẽ thất bại.</p></div><div class="col-lg-6 offset-lg-1"><div class="mb-4"><label class="form-label"for="__ThanhDieuDbServer">Địa Chỉ Database</label> <input class="form-control form-control-lg"id="__ThanhDieuDbServer"name="__ThanhDieuDbServer"placeholder="Mặc định là localhost"value="localhost"></div><div class="mb-4"><label class="form-label"for="__ThanhDieuDbUser">Tài Khoản CSDL</label> <input class="form-control form-control-lg"id="__ThanhDieuDbUser"name="__ThanhDieuDbUser"placeholder="Tài khoản cơ sở dữ liệu"value="root"></div><div class="mb-4"><label class="form-label"for="__ThanhDieuDbPwd">Mật Khẩu CSDL</label> <input class="form-control form-control-lg"id="__ThanhDieuDbPwd"name="__ThanhDieuDbPwd"placeholder="Điền mật khẩu cơ sở dữ liệu"></div><div class="mb-4"><label class="form-label"for="__ThanhDieuDbName">Tên CSDL</label> <input class="form-control form-control-lg"id="__ThanhDieuDbName"name="__ThanhDieuDbName"placeholder="Tên cơ sở dữ liệu"></div><div class="mb-4"><label class="form-label"for="__ThanhDieuLicense">Giấy Phép ( Nếu Có )</label> <input class="form-control form-control-lg"id="__ThanhDieuLicense"name="__ThanhDieuLicense"placeholder="Mã giấy phép kích hoạt tên miền"></div></div></div></div><div class="block-content mt-4"><div class="mb-4 row"><div class="col-lg-6 offset-lg-5"><form action="your-php-script.php"id="installForm"method="post"><button class="mb-2 btn btn-primary"id="installdb"name="install"type="button"value="yes"><i class="fa fa-arrow-right me-1 opacity-50"></i> Cài đặt</button></form></div></div></div></div></form><?php  $installLockPath = "\x2e\56\x2f\x2e\56\x2f\151\156\163\x74\141\x6c\x6c\x2e\x6c\x6f\x63\x6b"; } elseif ($a == 2 && isset($_GET["\x73"]) && isset($_COOKIE["\151\156\x73\164\141\x6c\154\x5f\163\164\141\164\x65"]) && $_GET["\163"] == $_COOKIE["\151\x6e\x73\164\x61\154\x6c\137\x73\164\141\x74\145"]) { $file_path = __DIR__ . "\57\56\56\x2f\151\x6e\x73\x74\141\x6c\x6c\56\154\x6f\143\x6b"; $content = "\x74\x68\x61\x6e\150\144\151\145\x75\154\x6f\166\145\x3d\x74\x72\x75\x65"; file_put_contents($file_path, $content); ?>
<audio autoplay controls loop style="display:none"><source src="https://files.catbox.moe/tn83zf.mp3"type="audio/mpeg"></audio><script>$(document).ready(function(){layer.msg("Cài đặt thành công!")})</script><canvas height="950"id="canvas"width="1920"></canvas><style>canvas{position:relative;zindex:1;pointer-events:none;position:fixed;top:0;left:0}</style><div class="block block-fx-shadow block-rounded"><div class="block-content"><div class="row items-push"><div class="text-center text-muted"><h2 class="mt-0"><i class="mdi mdi-check-all"></i></h2><h3 class="mt-0">Good for you !</h3><p class="mb-2 mt-2 mx-auto w-75 text-nowrap">Tài khoản mặc định: <span class="fw-bold fs-sm text-warning">admin</span></p><p class="mb-2 mt-2 mx-auto w-75 text-nowrap">Mật khẩu mặc định: <span class="fw-bold fs-sm">123456</span></p><small>* Vui lòng đổi mật khẩu mới ở trang quản trị.</small><div class="mb-3 mt-2"><a class="mb-2 btn btn-alt-primary btn-sm d-block d-sm-inline-block mb-sm-0 me-sm-2"href="../">Trở về trang chủ</a> <a class="btn btn-sm d-block d-sm-inline-block btn-alt-success"href="../admin/"target="_blank">Vào trang quản trị</a></div><p class="mb-2 mt-2 mx-auto w-75">Quá trình cài đặt hoàn tất và bạn có thể bắt đầu sử dụng hệ thống. Nếu bạn vẫn muốn cài đặt lại./Chỉ cần xóa tệp install.lock trống {domain}/install.lock</p></div></div></div></div><?php  } else { header("\x4c\x6f\143\x61\x74\151\x6f\156\72\40\56\x2f"); } goto QiYal; jUNcv: if ($a == 1 && $submit) { $error = array("\x5f\137\x54\150\x61\x6e\150\x44\x69\x65\x75\x44\142\x53\x65\x72\166\145\162" => "\x56\165\x69\40\x6c\303\xb2\x6e\147\x20\156\x68\341\272\255\x70\x20\xc4\x91\xe1\273\213\141\x20\143\150\xe1\273\x89\40\x63\xc6\241\40\x73\341\273\x9f\x20\x64\341\xbb\257\x20\154\151\341\273\207\165", "\x5f\137\x54\x68\x61\156\150\x44\x69\x65\x75\x44\x62\125\163\145\162" => "\126\x75\x69\40\154\xc3\262\156\147\x20\156\150\341\272\255\x70\40\x74\303\240\x69\40\153\x68\x6f\xe1\272\xa3\156\x20\143\xc6\xa1\x20\163\xe1\273\237\40\144\341\273\257\40\x6c\151\xe1\273\x87\x75", "\x5f\x5f\x54\x68\x61\x6e\x68\x44\x69\x65\165\104\142\x4e\x61\155\145" => "\126\x75\x69\x20\154\xc3\262\156\x67\x20\156\150\xe1\xba\xad\x70\40\164\xc3\252\x6e\x20\x63\xc6\241\x20\x73\341\xbb\x9f\x20\x64\xe1\xbb\257\x20\154\x69\341\273\x87\165"); foreach ($error as $key => $val) { if (!array_isset($_POST, $key)) { $error_msg = $val; break; } } if (!$error_msg) { $thanhdieudb = @mysqli_connect($_POST["\x5f\x5f\x54\150\x61\156\150\104\x69\x65\x75\x44\x62\123\145\162\x76\145\162"], $_POST["\137\137\124\x68\x61\x6e\150\x44\x69\x65\x75\x44\x62\125\x73\x65\x72"], $_POST["\137\x5f\x54\x68\141\x6e\x68\104\151\145\x75\104\x62\x50\x77\x64"]); if ($thanhdieudb) { mysqli_query($thanhdieudb, "\163\x65\x74\x20\x6e\141\155\x65\163\40\165\164\x66\70"); if (@mysqli_select_db($thanhdieudb, $_POST["\137\x5f\124\x68\141\156\150\x44\151\x65\165\x44\142\116\141\155\145"])) { $sqlbackup = "\x6c\157\166\x65\x64\x61\171\56\163\161\154"; $sql = file_get_contents($sqlbackup); if ($sql !== false) { $queries = explode("\73", $sql); foreach ($queries as $query) { $query = trim($query); if (!empty($query)) { if (mysqli_query($thanhdieudb, $query)) { } else { echo "\x3c\163\143\x72\x69\160\164\x3e\x24\50\x64\x6f\x63\x75\155\145\156\164\51\56\x72\x65\141\144\171\x28\x66\x75\x6e\x63\x74\151\x6f\x6e\x28\51\40\173\x6c\141\x79\x65\x72\56\155\x73\147\x28\x27\114\341\xbb\x97\151\54\40\153\150\xc3\xb4\x6e\x67\x20\164\150\341\273\x83\40\xc4\221\341\273\225\x20\144\341\xbb\xaf\x20\x6c\x69\341\xbb\x87\165\40\304\221\xc3\xa8\40\x6c\xc3\xaa\x6e\x20\x64\xe1\273\257\40\x6c\x69\341\xbb\207\x75\x20\x63\305\xa9\56\47\x29\x3b\175\51\x3c\x2f\x73\143\x72\x69\x70\164\x3e"; } } } } else { echo "\x4c\341\273\x97\151\x20\x6b\150\x69\x20\304\221\xe1\xbb\x8d\143\x20\146\151\x6c\x65\x20\123\x51\x4c\56"; } $config = "\74\x3f\x70\150\x70\xa"; $config .= "\44\x6c\157\143\141\x6c\x68\157\163\x74\x5f\x64\142\40\x3d\40\x27" . trim($_POST["\137\x5f\x54\150\141\156\150\x44\x69\x65\165\x44\x62\123\x65\x72\x76\x65\162"]) . "\x27\73\12"; $config .= "\44\x75\x73\145\x72\156\x61\155\x65\x5f\x64\142\x20\75\x20\47" . trim($_POST["\x5f\137\124\x68\141\156\x68\x44\x69\x65\165\x44\x62\x55\x73\145\x72"]) . "\x27\73\xa"; $config .= "\44\160\141\x73\163\167\x6f\162\x64\x5f\144\142\x20\x3d\40\47" . trim($_POST["\137\x5f\x54\x68\x61\156\x68\104\151\145\x75\x44\x62\x50\x77\x64"]) . "\x27\73\12"; $config .= "\x24\144\141\x74\141\x62\x61\163\x65\x5f\x64\x62\x20\75\x20\47" . trim($_POST["\137\137\x54\150\141\x6e\150\x44\x69\145\x75\x44\142\x4e\141\x6d\x65"]) . "\47\x3b\12"; $key_ss = "\x3c\77\160\x68\x70\12"; $key_ss .= "\x64\x65\146\151\x6e\x65\50\x27\x4c\151\143\x65\x6e\163\x65\47\x2c\40\47" . trim($_POST["\137\x5f\124\150\141\x6e\150\x44\151\x65\165\x4c\151\143\145\156\163\x65"]) . "\x27\x29\73\40\57\57\40\x4b\x68\xc3\263\141\x20\147\x69\341\272\245\171\x20\x70\150\xc3\xa9\160\40\143\341\xbb\247\141\40\142\341\xba\xa1\x6e\xa"; $ConfigPath = "\56\x2e\x2f\x63\x6f\x6e\146\57\x64\142\56\x73\161\154\x2e\160\x68\x70"; $LicenseKey = "\x2e\x2e\x2f\153\x65\x79\x2e\x70\x68\x70"; file_put_contents($ConfigPath, $config); file_put_contents($LicenseKey, $key_ss); $state = md5(uniqid(rand(), true)); setcookie("\151\x6e\x73\164\141\154\154\137\163\164\141\164\x65", $state, time() + 3600, "\57"); $messages = array(array("\x74\141\x62\154\145" => "\103\x6f\x6d\x6d\145\156\x74\163", "\144\x65\x6c\141\171" => 100), array("\x74\x61\142\x6c\x65" => "\114\157\166\x65\137\163\145\x74\x74\x69\156\147", "\144\x65\154\141\x79" => 3000), array("\x74\141\x62\154\145" => "\x53\x65\164\x74\x69\156\x67", "\144\x65\154\x61\171" => 5000), array("\x74\x61\142\154\x65" => "\125\163\x65\x72\163", "\x64\145\x6c\141\x79" => 7000)); echo "\x3c\x6c\x69\156\x6b\x20\162\x65\x6c\x3d\x22\163\164\171\154\145\x73\x68\x65\x65\164\x22\x20\x68\x72\x65\146\75\42\150\x74\x74\160\163\72\x2f\57\143\144\156\x2e\x62\157\x6f\x74\x63\x64\x6e\56\x6e\x65\164\57\141\152\141\170\57\x6c\151\x62\163\57\x6c\x61\x79\145\162\x2f\63\x2e\61\56\61\x2f\x74\150\x65\x6d\x65\57\x64\145\146\141\165\154\x74\57\x6c\141\x79\x65\x72\56\143\x73\x73\42\76"; echo "\x3c\x73\143\x72\x69\x70\x74\76"; foreach ($messages as $index => $message) { echo "\163\x65\164\124\151\155\x65\x6f\165\x74\x28\146\165\156\x63\x74\151\157\156\50\x29\x20\173"; echo "\x20\x20\x20\x20\x6c\141\171\x65\162\56\x6d\163\x67\x28\47\304\x90\141\x6e\147\40\304\x91\341\xbb\225\40\x64\341\273\257\x20\154\151\xe1\xbb\207\165\x20\x62\341\272\243\x6e\x67\40\140{$message["\164\141\x62\154\145"]}\x60\x2e\x2e\56\47\54\x20\173"; echo "\x20\40\x20\x20\40\x20\x20\x20\x69\143\157\x6e\72\40\61\x36\x2c"; echo "\40\40\x20\x20\40\40\40\x20\x73\x68\x61\144\x65\72\40\60\56\63\x2c"; echo "\40\40\40\40\x20\x20\40\x20\164\151\155\x65\72\40\x30"; echo "\x20\40\x20\40\175\51\73"; echo "\175\54\40{$message["\144\145\154\x61\171"]}\51\73"; } echo "\x73\145\164\x54\151\x6d\145\x6f\x75\164\50\146\165\x6e\x63\x74\151\x6f\156\50\x29\x20\x7b"; echo "\x20\40\x20\x20\x77\151\x6e\144\157\x77\56\x6c\x6f\143\x61\x74\x69\x6f\156\56\x68\x72\145\x66\75\x27\56\x2f\77\x61\75\x32\46\163\x3d{$state}\47\x3b"; echo "\x7d\54\x20\x38\65\x30\x30\x29\73"; echo "\74\57\163\143\x72\151\160\x74\76"; } else { $error_msg = "\x4b\x68\303\264\x6e\147\x20\x74\xc3\254\x6d\x20\164\x68\xe1\xba\xa5\171\x20\x63\306\241\x20\x73\xe1\273\x9f\40\144\xe1\xbb\257\40\x6c\x69\xe1\273\207\165"; } } else { $error_msg = "\124\150\xc3\264\x6e\147\x20\x74\x69\x6e\40\143\306\xa1\x20\x73\xe1\273\237\x20\144\341\xbb\257\x20\154\x69\xe1\xbb\207\165\x20\x73\x61\x69\x2c\x20\153\xe1\272\277\164\x20\x6e\341\273\221\x69\40\153\150\303\264\156\x67\40\164\x68\xc3\240\156\150\x20\143\xc3\xb4\156\x67"; } } } goto vg2G5; kFSQD: $web_url = dirname(($_SERVER["\123\105\x52\x56\105\x52\137\x50\117\122\124"] == 443 ? "\150\164\164\160\163" : "\x68\x74\x74\x70") . "\72\57\57" . $_SERVER["\x48\124\x54\x50\x5f\x48\x4f\123\124"] . str_replace($_SERVER["\104\x4f\x43\125\115\x45\x4e\x54\137\122\117\x4f\x54"], substr($_SERVER["\x44\x4f\103\125\x4d\105\116\x54\x5f\x52\x4f\x4f\x54"], -1) == "\x2f" ? "\x2f" : '', dirname($_SERVER["\x53\103\x52\111\x50\124\137\x46\111\x4c\105\x4e\101\x4d\x45"]))); goto Eczn9; nwAA1: $submit = isset($_POST["\x69\156\163\164\141\x6c\x6c"]) ? addslashes($_POST["\x69\x6e\163\x74\x61\154\154"]) : ''; goto jUNcv; pQeoc: $mysql_bb = function_exists("\155\x79\163\x71\x6c\151\137\x63\x6f\x6e\156\x65\x63\164") ? "\x48\341\273\x97\40\x74\162\341\273\xa3" : "\x4b\150\xc3\264\x6e\x67\x20\150\xe1\xbb\227\40\x74\x72\xe1\xbb\xa3"; goto kFSQD; uTpYB: if ($error_msg) { ?>
<div class="alert alert-danger"role="alert"><p class="mb-0"><?php  echo $error_msg; ?>
</p></div><?php  } goto YqFav; vg2G5: if ($a == 2) { if (!isset($_GET["\163"]) or !isset($_COOKIE["\x69\x6e\163\x74\x61\x6c\154\137\163\164\141\x74\145"]) or $_GET["\x73"] != $_COOKIE["\x69\x6e\x73\164\x61\x6c\154\137\163\x74\141\164\145"]) { header("\114\157\x63\141\x74\x69\x6f\x6e\72\x20\x2e\x2e\x2f"); } } goto a5g0J; a5g0J: function array_isset($arr, $key) : bool { return isset($arr[$key]) && !empty($arr[$key]); } goto aKZp7; UkKEy: ?>
</h2></div><?php  goto uTpYB; Eczn9: $error_msg = ''; goto j6Hre; j6Hre: $a = isset($_GET["\141"]) ? intval($_GET["\141"]) : 0; goto nwAA1; QiYal: ?>
</div></div></div></div></main></div><script src="../assets/oneui/js/lib/layer.min.js"></script><script src="../assets/oneui/js/oneui.app.min-5.6.js"></script><script>var canvas1,ctx,W,H;if($(document).ready(function(){$("#installdb").click(function(t){t.preventDefault(),layer.msg("Đang kết nối đến database...",{icon:16,shade:.3,time:0}),$(this).prop("disabled")||($(this).html('<i class="fa fa-spinner fa-spin opacity-50 me-1"></i> Đang kết nối...').prop("disabled",!0),setTimeout(function(){$("#installdb").closest("form").append('<input type="hidden" name="install" value="yes">').submit()},Math.floor(501*Math.random())+1e3))})}),988<=screen.width)var mp=150;else mp=75;var deactivationTimerHandler,reactivationTimerHandler,animationHandler,particles=[],angle=0,tiltAngle=0,confettiActive=!0,animationComplete=!0,particleColors={colorOptions:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return 10<=this.colorIncrementer&&(this.colorIncrementer=0,this.colorIndex++,this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};function confettiParticle(t){this.x=Math.random()*W,this.y=Math.random()*H-H,this.r=RandomFromTo(10,30),this.d=Math.random()*mp+10,this.color=t,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return ctx.beginPath(),ctx.lineWidth=this.r/2,ctx.strokeStyle=this.color,ctx.moveTo(this.x+this.tilt+this.r/4,this.y),ctx.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),ctx.stroke()}}function InitializeButton(){$("#stopButton").click(DeactivateConfetti),$("#startButton").click(RestartConfetti)}function SetGlobals(){canvas1=document.getElementById("canvas"),ctx=canvas1.getContext("2d"),W=window.innerWidth,H=window.innerHeight,canvas1.width=W,canvas1.height=H}function InitializeConfetti(){animationComplete=!(particles=[]);for(var t=0;t<mp;t++){var i=particleColors.getColor();particles.push(new confettiParticle(i))}StartConfetti()}function Draw(){ctx.clearRect(0,0,W,H);for(var t,i=[],n=0;n<mp;n++)t=n,i.push(particles[t].draw());return Update(),i}function RandomFromTo(t,i){return Math.floor(Math.random()*(i-t+1)+t)}function Update(){var t,i=0;angle+=.01,tiltAngle+=.1;for(var n=0;n<mp;n++){if(t=particles[n],animationComplete)return;!confettiActive&&t.y<-15?t.y=H+100:(stepParticle(t,n),t.y<=H&&i++,CheckForReposition(t,n))}0===i&&StopConfetti()}function CheckForReposition(t,i){(t.x>W+20||t.x<-20||t.y>H)&&confettiActive&&(0<i%5||i%2==0?repositionParticle(t,Math.random()*W,-10,Math.floor(10*Math.random())-10):0<Math.sin(angle)?repositionParticle(t,-5,Math.random()*H,Math.floor(10*Math.random())-10):repositionParticle(t,W+5,Math.random()*H,Math.floor(10*Math.random())-10))}function stepParticle(t,i){t.tiltAngle+=t.tiltAngleIncremental,t.y+=(Math.cos(angle+t.d)+3+t.r/2)/2,t.x+=Math.sin(angle),t.tilt=15*Math.sin(t.tiltAngle-i/3)}function repositionParticle(t,i,n,e){t.x=i,t.y=n,t.tilt=e}function StartConfetti(){W=window.innerWidth,H=window.innerHeight,canvas1.width=W,canvas1.height=H,function t(){return animationComplete?null:(animationHandler=requestAnimFrame(t),Draw())}()}function ClearTimers(){clearTimeout(reactivationTimerHandler),clearTimeout(animationHandler)}function DeactivateConfetti(){confettiActive=!1,ClearTimers()}function StopConfetti(){animationComplete=!0,null!=ctx&&ctx.clearRect(0,0,W,H)}function RestartConfetti(){ClearTimers(),StopConfetti(),reactivationTimerHandler=setTimeout(function(){animationComplete=!(confettiActive=!0),InitializeConfetti()},100)}$(document).ready(function(){SetGlobals(),InitializeButton(),InitializeConfetti(),$(window).resize(function(){W=window.innerWidth,H=window.innerHeight,canvas1.width=W,canvas1.height=H})}),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}</script></body></html>